---
layout: post
title:  "manjaro на маку: вигнання зла"
date:   2019-09-12 16:00
categories: blog
tags: 
  - комп’ютери
  - linux
---

цього разу я не писатиму «маю imac (2008) задурно, що робити?» — зрозуміло, що це не серверна машинка, тому manjaro kde і дітям гратися. знаю з невеличкого досвіду, що apple може бути вельми складним через свої фірмові «покращення», які сильно утруднюють встановлення чогось нормального на їхні комп’ютери… але цього разу поталанило: флешки з «живим» образом manjaro та `alt` на старті машини достатньо, щоби завантажитися з usb. схоже, що ключові елементи (зокрема, відео та wifi) з пінгвіном дружать, можна встановлювати.

чудово, що маємо «під капотом»?

* модель [imac8,1](https://everymac.com/systems/apple/imac/specs/imac-core-2-duo-2.8-24-inch-aluminum-early-2008-penryn-specs.html) (2008);
* процесор — intel core2 duo e8235 (2,8 ггц);
* 4 гб оперативної пам’яті та жорсткий диск на 320 гб;
* відео amd radeon hd2600
* моноблок з екраном 24" (1920x1200 пікселів).

![manjaro наживо на imac (2008)](/assets/images/2019/2019-09-12-manjaro-on-imac-01.jpg)

#### проблема: wifi

на диво, linux на цій моделі imac «встановлюється сам», жодних зачіпок. але… встановлена система не бачить модуля wifi і, відповідно, не може підключитися до бездротової мережі… але ж з флешки все чудово працювало?! здається, «живий» manjaro використовує драйвер b43 для мережевого модуля broadcom, але після встановлення намагається використати універсальний драйвер wl, який тут не працює, тому що b43 чомусь вимкнено (`blacklist`) у файлі `/etc/modprobe.d/linux52-broadcom-wl.conf`. тимчасово проблему вирішує таке:

```
sudo modprobe -r wl
sudo modprobe bc43
```

це вивантажує (`-r`) драйвер wl та завантажує b43 — і бездротова мережа одразу «заводиться»… до перезавантаження системи. щоби поремонтувати остаточно, слід відредагувати згаданий файл, замінивши `blacklist b43` на `blacklist wl` (хороша [підказка тут](https://www.dedoimedo.com/computers/manjaro-broadcom-wireless.html)).


#### репозиторії aur

комп’ютер працює, можна користуватися… але є декілька умовно обов’язкових етапів налаштування, які варто зробити одразу. зокрема, встановити дещо для доступу до додаткових програм, котрих немає в офіційних репозиторіях manjaro (і потім включити репозиторій aur в менеджері пакунків):

```
sudo pacman -S base-devel
sudo pacman -S pacaur
```


#### вигнання зла

з цікавості зазирнув до словника латини, і виявляється, що [malum](https://en.wiktionary.org/wiki/malum#Latin) — це водночас яблуко та… зло, лихо, нещастя. ну що ж, з цього imac’а злих демонів вигнано за допомогою шаманського бубна і святого лінукса. фотозвіт додаю.

![зло вигнане з комп’ютера!](/assets/images/2019/2019-09-12-manjaro-on-imac-02.jpg)