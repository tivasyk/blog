---
layout: post
title: щось таке дозріває на баштані
date: '2019-07-23T21:36:00.003+03:00'
author: tivasyk
tags:
- комп'ютери
- linux
- bash
- позитив
modified_time: '2019-07-23T21:36:45.669+03:00'
thumbnail: https://1.bp.blogspot.com/-51NZfw-lrmo/XTdNYnL2E5I/AAAAAAABZr4/QwEhS4ZnzRg1XZj6EG0aLMhi5AkuELZlQCLcBGAs/s72-c/screenshot.2019-07-23%2B%25283%2529.jpg
blogger_id: tag:blogger.com,1999:blog-1498862426470895405.post-2895211768358187522
blogger_orig_url: http://www.tivasyk.info/2019/07/blog-post_23.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-51NZfw-lrmo/XTdNYnL2E5I/AAAAAAABZr4/QwEhS4ZnzRg1XZj6EG0aLMhi5AkuELZlQCLcBGAs/s1600/screenshot.2019-07-23%2B%25283%2529.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" data-original-height="625" data-original-width="887" height="225" src="https://1.bp.blogspot.com/-51NZfw-lrmo/XTdNYnL2E5I/AAAAAAABZr4/QwEhS4ZnzRg1XZj6EG0aLMhi5AkuELZlQCLcBGAs/s320/screenshot.2019-07-23%2B%25283%2529.jpg" width="320" /></a></div>готова придатна для використання заготовка системного монітора на bash’і.<br /><br />дуже багато речей можна і треба покращувати — але наразі я трохи відпочину і просто додаватиму «сенсорів», бо вже навіть такий примітивний «двигунець» дозволяє мені виводити довільно те, що треба, за шаблонами на кшталт такого:<br /><code></code><br /><pre><code>...<br />SCREEN_TEMPLATE+=("&lt;BOLD&gt;MEMORY&lt;RESET&gt;")<br />SCREEN_TEMPLATE+=(" Physical: &lt;MEMORY_TOTAL&gt; GB (&lt;MEMORY_USED_PERCENTAGE&gt;% used)")<br />SCREEN_TEMPLATE+=(" Swap:&nbsp; &nbsp; &nbsp;&lt;SWAP_TOTAL&gt; GB (&lt;SWAP_USED_PERCENTAGE&gt;% used)")<br />...</code></pre><br />з цікавого: певний час я мудрував над проблемою табуляції: стандартні 8 проблів було замало, а виморочувати якусь «розумну» функцію виводу не хотілося. вдався до найпростішого, що міг вигадати: tput дозволяє встановлювати довільну табуляцію (а ще сховати курсор і зберегти вміст консолі):<br /><code></code><br /><pre><code># Setup screen<br /># Set tab width<br />tabs +${TAB_WIDTH}<br /># Set invisible cursor<br />tput civis<br /># Save terminal contents<br />tput smcup<br /># Clear terminal<br />clear</code></pre><br />але як відновити параметри за замовчуванням після переривання за ctrl+c? а ось так:<br /><code></code><br /><pre><code># Setup Ctrl+C trap to exit gracefully<br />trap graceful_exit INT</code></pre><br />тут graceful_exit — функція, котра відновлює параметри консолі:<br /><code></code><br /><pre><code>graceful_exit() {<br /><span style="white-space: pre;"> </span># Restore cursor visibility<br /><span style="white-space: pre;"> </span>tput cvvis<br /><span style="white-space: pre;"> </span># Restore tab size<br /><span style="white-space: pre;"> </span>tabs -8<br /><span style="white-space: pre;"> </span># Restore terminal contents<br /><span style="white-space: pre;"> </span>tput rmcup<br /><span style="white-space: pre;"> </span># Finally, exit<br /><span style="white-space: pre;"> </span>exit 0<br />}</code></pre><br /><a href="http://1.bp.blogspot.com/-wa2GJdBFGLI/XTdSXE93MtI/AAAAAAABZsM/xDwpDti66egR9rmaaPlHeSKbIizLjfEVQCK4BGAYYCw/s1600/screenshot.2019-07-23_owncloud_reader.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="173" src="https://1.bp.blogspot.com/-wa2GJdBFGLI/XTdSXE93MtI/AAAAAAABZsM/xDwpDti66egR9rmaaPlHeSKbIizLjfEVQCK4BGAYYCw/s320/screenshot.2019-07-23_owncloud_reader.jpg" width="320" /></a>ще з цікавого: на сервері вже кілька тижнів крутиться owncloud в контейнері. днями закинув туди всю бібліотеку з dropbox’а і додав втулок <a href="https://marketplace.owncloud.com/apps/files_reader" target="_blank">owncloud reader</a> для читання електронних текстів (epub та pdf) — можна читати, не завантажуючи на пристрій (звісно, за наявности підключення до інтернету). втім, ніщо не заважає і завантажити за потреби в читалці на смартфоні.<br /><br /><b>p.s.</b> намагаюсь трішки дистанціюватися від результатів виборів до верховної ради, бо цензурної лексики для цієї теми я наразі не маю.