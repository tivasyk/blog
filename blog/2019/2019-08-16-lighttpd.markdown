---
layout: post
title:  "lighttpd, схований за traefik’ом"
date:   2019-08-16 16:30
categories: blog
tags: [комп’ютери, docker, traefik, підказка]
---

зненацька я знайшов і вирішив хибу, через яку я [не міг запустити веб-сервер lighttpd]({% post_url 2019/2019-08-12-more-containers %}) для роздачі блогу. виявляється, що банальна логіка не завжди помічна для вирішення суто технічних проблем, або, іншими словами, read the f*cking manual! отже, де ховалася заковика? в налаштуваннях зв’язку контейнера з проксі traefik!

щоби зв’язати сервіс в контейнері з traefik’ом, потрібно вказати, на який порт traefik має переадресовувати певні запити. приміром, в моєму випадку запити до blog.tivasyk.info треба було адресувати контейнеру lighttpd на порт… який? бо всередині контейнера веб-сервер слухає стандартний для http порт 80, але назовні він «транслюється» (exposed в термінах docker) на порт 8088. отже, логічно, що traefik має перекидати запити на порт 8088, правильно?

сюрприз: [неправильно](https://stackoverflow.com/a/49418168/6123418)! виявляється, traefik спілкується з контейнерами через мережу docker, і в налаштуваннях треба вказувати *внутрішній* порт сервісу. себто, в моєму випадку, 80.

тож наразі цей щоденничок роздає lighttpd, а не сам jekyll, хоча для читача нічого не змінилося. при цьому веб-сервер jekyll’а відключено — він лише генерує статичні html’и для блогу. тепер трішки поспостерігаю, чи це вирішило повністю [початкову проблему]({% post_url 2019/2019-08-12-more-containers %}) — надмірне використання процесора.