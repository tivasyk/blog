---
layout: post
title: налаштував зручне перемикання дисплею
date: '2010-03-11T22:25:00.005+02:00'
author: tivasyk
tags:
- комп'ютери
- linux
- підказки
modified_time: '2010-04-24T17:29:08.867+03:00'
thumbnail: http://4.bp.blogspot.com/_wFmUV6FUCKU/SuF0Omee-tI/AAAAAAAAGTM/y8ooddxGFOk/s72-c/tivasyk_2displays.png
blogger_id: tag:blogger.com,1999:blog-1498862426470895405.post-8955818938412250287
blogger_orig_url: http://www.tivasyk.info/2010/03/blog-post_11.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_wFmUV6FUCKU/SuF0Omee-tI/AAAAAAAAGTM/y8ooddxGFOk/s1600-h/tivasyk_2displays.png" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" src="http://4.bp.blogspot.com/_wFmUV6FUCKU/SuF0Omee-tI/AAAAAAAAGTM/y8ooddxGFOk/s200/tivasyk_2displays.png" /></a></div>підключаючи <a href="http://www.tivasyk.info/2009/10/blog-post_5555.html">зовнішні 20 дюймів до нетбука</a>, щоразу мав виконувати одну й ту саму послідовність дій: запустити <i>lxrandr</i> з меню &gt; переключити дисплей &gt; вбити <i>conky</i> і запустити заново (щоби він правильно розташувався на екрані після зміни розміру).<br /><br />набридло, треба автоматизувати.<br /><br />чого хочеться? щоби за гарячим сполученням клавіш (скажімо, <i>ctrl+f5</i>) якийсь простий скрипт визначав, чи підключено зовнішній монітор — і переключав дисплей, а побігом ще й перезапускав <i>conky</i>.<br /><br /><a name='more'></a>проста заготовка скрипта <a href="http://sidux.com/index.php?name=PNphpBB2&amp;file=viewtopic&amp;t=17473">знайшлася в тенетах</a>, я лише максимально її спростив:<br /><blockquote><code>#! /bin/sh<br />xrandr | grep "VGA connected"<br />if [ "$?" = "0" ] ; then<br />&nbsp;&nbsp; xrandr --output VGA --auto --output LVDS --off<br />else<br />&nbsp;&nbsp; xrandr --output LVDS --auto --output VGA --off<br />fi <br />killall conky &amp;&amp; sleep 2 &amp;&amp; conky &amp;</code></blockquote><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/_wFmUV6FUCKU/S5lQpZLThtI/AAAAAAAAHxA/XT7TloWb4MQ/s1600-h/keyboard_shortcuts_xfce.png" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="175" src="http://3.bp.blogspot.com/_wFmUV6FUCKU/S5lQpZLThtI/AAAAAAAAHxA/XT7TloWb4MQ/s200/keyboard_shortcuts_xfce.png" width="200" /></a></div>нажаль, скрипт справді простий — автоматичного визначення відеовиходів нема, працюватиме лише на ноутбуках з інтегрованим відео intel, а за необхідности відредагувати читайте мої дописи про <a href="http://www.tivasyk.info/2009/10/linux_23.html">налаштування зовнішнього монітора в linux</a><i></i>.<br /><br />втім, мені цього досить. скопіював код в текстовий редактор, зберіг файл <i>switch_monitor</i> до теки <i>/usr/bin</i> (потрібні права <i>root</i>’а) і дозволив виконання. тоді в аплеті налаштування клавіатури (див. <a href="http://3.bp.blogspot.com/_wFmUV6FUCKU/S5lQpZLThtI/AAAAAAAAHxA/XT7TloWb4MQ/s1600-h/keyboard_shortcuts_xfce.png">скріншот</a>) налаштував запуск команди <i>switch_monitor</i> за скороченням <i>ctrl+f5</i>. готово!<br /><br />тепер достатньо підключити кабель і натиснути дві кнопки — стільниця на моніторі, відключити кабель і натиснути — стільниця знову на дислеї нетбука.<br /><br /><b>p.s.</b> для подальшого вивчення залишив собі <a href="http://www.thinkwiki.org/wiki/Talk:Sample_Fn-F7_script">ось цей значно складніший скрипт</a>… але то вже за іншим разом якось.