---
layout: post
title: ноутбук в режимі планшета (продовження)
date: '2017-01-09T19:57:00.000+02:00'
author: tivasyk
tags:
- комп'ютери
- linux
- підказки
modified_time: '2017-01-09T19:57:06.323+02:00'
thumbnail: https://1.bp.blogspot.com/-McxCuO5J0tQ/WHOfC1FVLHI/AAAAAAAA8qI/R-dLdg1HWnIrkmNLg_O42PzorbajyGYiACLcB/s72-c/2017-01-09_091710_1440x2560_resize.jpg
blogger_id: tag:blogger.com,1999:blog-1498862426470895405.post-2180502149385026341
blogger_orig_url: http://www.tivasyk.info/2017/01/blog-post_87.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-McxCuO5J0tQ/WHOfC1FVLHI/AAAAAAAA8qI/R-dLdg1HWnIrkmNLg_O42PzorbajyGYiACLcB/s1600/2017-01-09_091710_1440x2560_resize.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="200" src="https://1.bp.blogspot.com/-McxCuO5J0tQ/WHOfC1FVLHI/AAAAAAAA8qI/R-dLdg1HWnIrkmNLg_O42PzorbajyGYiACLcB/s200/2017-01-09_091710_1440x2560_resize.jpg" width="112" /></a></div>гаразд, я поборов тачскрін — тепер працює <b>гортання двома пальцями, масштабування та емуляція правої кнопки миші за довгим тапом</b>, решта жестів мені не потрібні, тож не пробував.<br /><br />початок історії з налаштуванням планшетного режиму <a href="http://www.tivasyk.info/2017/01/blog-post_8.html" target="_blank">в попередньому дописі</a>.<br /><br />в тенетах знайшлося багато підказок та рецептів на різні випадки, які лише умовно можна об'єднати темою «тачскрін і linux», і треба думати. мій випадок був такий: manjaro linux (на базі arch'а) розпізнав тачскрін як підключений пристрій, підключив драйвер і дозволив користуватися як однокнопочною мишкою. найточнішу підказку знайшов <a href="https://bbs.archlinux.org/viewtopic.php?id=193701" target="_blank">на форумах arch'а</a>. ось вивід xinput list:<br /><pre><code><br />⎡ Virtual core pointer                          id=2    [master pointer  (3)]<br />⎜   ↳ Virtual core XTEST pointer                id=4    [slave  pointer  (2)]<br />⎜   ↳ SYN1B7B:00 06CB:2991 Touchpad             id=10   [slave  pointer  (2)]<br />⎜   ↳ SYNAPTICS Synaptics Touch Digitizer V04 Pen       id=14   [slave  pointer  (2)]<br />⎜   ↳ <span style="color: #cc0000;">SYNAPTICS Synaptics Touch Digitizer V04   id=15</span>   [slave  pointer  (2)]<br />⎜   ↳ TESORO TESORO Gaming Mouse                id=16   [slave  pointer  (2)]<br />⎜   ↳ TESORO TESORO Gaming Mouse                id=18   [slave  pointer  (2)]<br />⎣ Virtual core keyboard                         id=3    [master keyboard (2)]<br />    ↳ Virtual core XTEST keyboard               id=5    [slave  keyboard (3)]<br />    ↳ Power Button                              id=6    [slave  keyboard (3)]<br />    ↳ Video Bus                                 id=7    [slave  keyboard (3)]<br />    ↳ Power Button                              id=8    [slave  keyboard (3)]<br />    ↳ Sleep Button                              id=9    [slave  keyboard (3)]<br />    ↳ AT Translated Set 2 keyboard              id=11   [slave  keyboard (3)]<br />    ↳ Acer WMI hotkeys                          id=12   [slave  keyboard (3)]<br />    ↳ HD WebCam                                 id=13   [slave  keyboard (3)]<br />    ↳ TESORO TESORO Gaming Mouse                id=17   [slave  keyboard (3)]<br />    ↳ USB-HID Keyboard                          id=19   [slave  keyboard (3)]<br />    ↳ USB-HID Keyboard                          id=20   [slave  keyboard (3)]<br /></code></pre><br />цікаво, до речі, чому миша tesoro sagitta spectrum зареєструвалася як два пристрої… але то питання на інший раз. тачскрін теж зареєстрований двома пристроями, і я не розумію, що то за pen (id=14), адже стилусом не користуюсь; мене цікавив лише id=15 (підсвітив кольором). параметри пристрою (вивід xinput list-props 15):<br /><pre><code><br />Device 'SYNAPTICS Synaptics Touch Digitizer V04':<br />        Device Enabled (139):   1<br />        Coordinate Transformation Matrix (141): 1.000000, 0.000000, 0.000000, 0.000000, 1.000000, 0.000000, 0.000000, 0.000000, 1.000000<br />        libinput Calibration Matrix (449):      1.000000, 0.000000, 0.000000, 0.000000, 1.000000, 0.000000, 0.000000, 0.000000, 1.000000<br />        libinput Calibration Matrix Default (450):      1.000000, 0.000000, 0.000000, 0.000000, 1.000000, 0.000000, 0.000000, 0.000000, 1.000000<br />        libinput Send Events Modes Available (262):     1, 0<br />        libinput Send Events Mode Enabled (263):        0, 0<br />        libinput Send Events Mode Enabled Default (264):        0, 0<br />        Device Node (265):      "<span style="color: #cc0000;">/dev/input/event13</span>"<br />        Device Product ID (266):        1739, 30332<br />        libinput Horizontal Scroll Enabled (267):       0<br /></code></pre><br />отже, суть підказки на форумах arch в тому, що потрібно додати відповідний розділ до файлу конфігурації xorg. в старіших дистрибутивах це /etc/X11/xorg.conf, а в новіших може бути кілька окремих файлів у теці /etc/X11/xorg.conf.d — у мене там лежали файли з налаштуваннями клавіатури, монітора та ще якась інформація від автоматичного конфігуратора manjaro, але нічого про тачскрін:<br /><pre><code><br />00-keyboard.conf<br />90-mhwd.conf<br />90-monitor.conf<br /></code></pre><br />задля експерименту я створив новий файл у цій теці (з-під рута або sudo!), назвавши 10-touchscreen.conf, додав запропонований на форумі код.<br /><br />щоправда, на форумі запропоновано трохи довший фрагмент, але методом наукового тику (себто емпірично) я з'ясував, що ідентифікувати драйвер та точку монтування тут не потрібно. зокрема, точка монтування в мене «стрибає» від завантаження до завантаження, але на роботу тачскріна з таким файлом конфігурації то ніяк не вплинуло.<br /><br /><pre><code>Section "InputClass"<br />&nbsp; &nbsp; &nbsp; &nbsp; Identifier "touchscreen"<br />&nbsp; &nbsp; &nbsp; &nbsp; MatchIsTouchscreen "on"<br />&nbsp; &nbsp; &nbsp; &nbsp; Option "Mode" "ABSOLUTE"<br />&nbsp; &nbsp; &nbsp; &nbsp; Option "TapButton1" "1"<br />&nbsp; &nbsp; &nbsp; &nbsp; Option "TapButton2" "2"<br />&nbsp; &nbsp; &nbsp; &nbsp; Option "TapButton3" "3"<br />&nbsp; &nbsp; &nbsp; &nbsp; Option "Evdev Wheel Emulation" "on"<br />&nbsp; &nbsp; &nbsp; &nbsp; Option "Evdev Wheel Emulation Axes" "6 7 4 5"<br />&nbsp; &nbsp; &nbsp; &nbsp; Option "VertTwoFingerScroll" "on"<br />&nbsp; &nbsp; &nbsp; &nbsp; Option "HorizTwoFingerScroll" "on"<br />&nbsp; &nbsp; &nbsp; &nbsp; Option "EmulateTwoFingerMinZ" "40"<br />&nbsp; &nbsp; &nbsp; &nbsp; Option "EmulateTwoFingerMinW" "8"<br />&nbsp; &nbsp; &nbsp; &nbsp; Option "CoastingSpeed" "0"<br />&nbsp; &nbsp; &nbsp; &nbsp; Option "VertScrollDelta" "50"<br />&nbsp; &nbsp; &nbsp; &nbsp; Option "HorizScrollDelta" "50"<br />&nbsp; &nbsp; &nbsp; &nbsp; Option "ZoomDistance" "100"<br />EndSection</code></pre><br />і це, власне, все. можна перезавантажити комп'ютер, або лише ікси (ctrl+alt+backspace), і тачпад працює як слід. я в захваті від свого 13-дюймового планшета =)