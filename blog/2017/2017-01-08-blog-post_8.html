---
layout: post
title: ноутбук в режимі планшета
date: '2017-01-08T20:09:00.001+02:00'
author: tivasyk
tags:
- комп'ютери
- linux
- підказки
- bash
modified_time: '2017-01-09T19:58:29.758+02:00'
thumbnail: https://4.bp.blogspot.com/-f6vwB_fz5Pg/WHKALuAVY8I/AAAAAAAA8pg/nmfOUZB8SiY3gEmmDPt2Jm1Q0KEc-UQ3QCLcB/s72-c/2017-01-08-130729_1440x2560_scrot.jpg
blogger_id: tag:blogger.com,1999:blog-1498862426470895405.post-5029932406342653708
blogger_orig_url: http://www.tivasyk.info/2017/01/blog-post_8.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="https://4.bp.blogspot.com/-f6vwB_fz5Pg/WHKALuAVY8I/AAAAAAAA8pg/nmfOUZB8SiY3gEmmDPt2Jm1Q0KEc-UQ3QCLcB/s1600/2017-01-08-130729_1440x2560_scrot.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="200" src="https://4.bp.blogspot.com/-f6vwB_fz5Pg/WHKALuAVY8I/AAAAAAAA8pg/nmfOUZB8SiY3gEmmDPt2Jm1Q0KEc-UQ3QCLcB/s200/2017-01-08-130729_1440x2560_scrot.jpg" width="112" /></a></div>припустімо, у вас є сучасний ноутбук-трансформер з сенсорним дисплеєм, і на ньому linux, і це не ubuntu… тоді є висока ймовірність, що…<br /><ul><li><b>серсорний екран</b> працює в примітивному режимі (без мультитача і жестів на кшалт скролу двома пучками);</li><li>після складання в планшет <b>клавіатура і тачпад</b> не працюють;</li><li><b>екранної клавіатури</b> немає «з коробки»; </li><li>нема як швидко <b>повернути зображення</b> на екрані в портретну орієнтацію та назад;</li><li><b>автоматичний поворот</b> зображення не працює.</li></ul>і так, ubuntu не пропонувати (так само як встановлення kde/plasma, якщо там все це працює з коробки).<br /><br />поки що не все з цього пофіксив, але дещо знайшов.<br /><br /><h3>екранна клавіатура</h3>поки що користуюсь onboard, але без зручностей, до яких звикаєш на мудрофоні: скажімо, відкривати клавіатуру доводиться руками з системного меню (хоча onboard має опцію автоматичного вигульку, але вона не працює без модуля gnome, який в мене не вставновлений і поки що не потрібен.<br /><br /><h3>увімкнення клавіатури і тачпада</h3>клавіатура і тачпад автоматично відключаються, якщо скласти транформера в планшетний режим, як і має бути — але залишаються заблоковані після зворотньої трансформації. знайшов невеликого скрипта (на жаль, вже забув, де… <a href="https://askubuntu.com/questions/693060/after-using-tablet-mode-touchpad-and-keyboard-not-responding-on-aspire-r13-ubu" target="_blank">пригадав!</a>), що відновлює роботу, але поки що не дійшли руки розібратися, як запускати його автоматично під час зміни конфігурації:<br /><br /><pre><code>#!/bin/sh<br />[ "root" != "$USER" ] &amp;&amp; exec sudo $0 "$@"<br />lsmod | grep '^[^ ]*hid' | cut -f1 -d " " | xargs -n1 rmmod<br />udevadm trigger<br />sleep 1<br />xinput|grep SYN1B|cut -f2 -d"="|cut -f1|xargs -n1 xinput --enable<br /></code></pre><br />скрипт потребує рутових прав для роботи, довелося трохи поморочитися із sudoers'ами, аби дозволити виконання з користувацького профіля.<br /><br /><h3>поворот зображення</h3>для повороту знайшов <a href="https://gist.github.com/mildmojo/48e9025070a2ba40795c" target="_blank">інший простий скрипт</a>. довелося трохи змінити один рядок, бо в мене xrandr не позначає поточний екран як primary:<br /><pre><code><br />XDISPLAY=<span class="pl-s"><span class="pl-pds">`</span>xrandr --current <span class="pl-k">|</span> grep " connected" <span class="pl-k">|</span> sed -e <span class="pl-s"><span class="pl-pds">'</span>s/ .*//g<span class="pl-pds">'</span></span><span class="pl-pds">`</span></span></code></pre><br />так, в лапках є пробіл перед connected, інакше, природньо, grep видає також рядки з disconnected. запускається з параметром normal / left / right / inverted для встановлення відповідної орієнтації, рута не потребує.<br /><br />додав у системне меню та «повісив» на клавіатуру (super+стрілки), працює але хочеться колись прив'язати до акселерометра, тож ще гуглитиму.<br /><br /><a href="http://www.tivasyk.info/2017/01/blog-post_87.html" target="_blank">далі буде</a>.