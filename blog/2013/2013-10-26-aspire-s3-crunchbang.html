---
layout: post
title: налаштування aspire s3 + crunchbang
date: '2013-10-26T22:58:00.004+03:00'
author: tivasyk
tags:
- комп'ютери
- linux
- підказки
modified_time: '2013-10-27T12:34:59.750+02:00'
thumbnail: http://4.bp.blogspot.com/-YkR3xej6TrU/Umq9E1-xxAI/AAAAAAAAY4E/fTOktOIrTS4/s72-c/N_I_Acer-Aspire-S3-MS2346_IMG_2216.jpg
blogger_id: tag:blogger.com,1999:blog-1498862426470895405.post-5644621626974528896
blogger_orig_url: http://www.tivasyk.info/2013/10/aspire-s3-crunchbang.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-YkR3xej6TrU/Umq9E1-xxAI/AAAAAAAAY4E/fTOktOIrTS4/s1600/N_I_Acer-Aspire-S3-MS2346_IMG_2216.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="115" src="http://4.bp.blogspot.com/-YkR3xej6TrU/Umq9E1-xxAI/AAAAAAAAY4E/fTOktOIrTS4/s200/N_I_Acer-Aspire-S3-MS2346_IMG_2216.jpg" width="200" /></a></div>віддали мені на «перевиховання» aspire s3-391 з діагнозом «мертвий модуль wifi» і з пустим місцем замість штатного ssd. свого часу це був <b>перший недорогий ультрабук</b> (дешевше тисячі) на базі intel core третього покоління. <br /><br />переваги:<br /><ul><li>тонкий корпус (13&nbsp;мм), невелика вага (1,35&nbsp;кг), досить компактний 13-дюймовий форм-фактор;</li><li>металева кришка;</li><li>чималий тачпад;</li><li>intel core i7-3517u + 4&nbsp;гб озу&nbsp;+ ssd = миттєва реакція системи.</li></ul>недоліки:<br /><ul><li>поганенька матриця дисплея, і лише 1366x768 пікселів; </li><li>акумулятор… 3-4 години реальної автономності?!</li><li>дистрофічні курсорні клавші, та й вся клавіатура посередня;</li><li>досить «дешевий» зовнішній вигляд, якщо придивитися.</li></ul><a name='more'></a>головний недолік — одверто <b>слабкий акумулятор</b>: 3260 ма•год не здатні забезпечити обіцяних в специфікації 6 годин автономності без нещадного обмеження частоти процесора, що і зроблено в налаштуваннях передвстановлених сьомих вікон™.<br /><br />попри це, вирішив спробувати оживити машинку і покористуватися трішки цим «макбуком для бідних», хоча з більшим задоволенням придбав би <a href="http://www.tivasyk.info/2013/06/blog-post_4.html">dell xps 13</a>… зарядив«живу» флешку crunchbang (знадобився твік з додатковим параметром ядра, про це далі) — як і варто було чекати, бездротова меррежа працює: очевидно, попередній власник спробував поставити восьмі вікна™ без ліцензії, і напоровся на примусове відключення wifi.<br /><br />придбав для нього накопичувач ssd (<a href="http://hotline.ua/computer-diski-ssd/samsung-840-evo-120gb-mz-7te120bw/" target="_blank">samsung 840 evo, 120 гб</a>); розбив 10-4-106 гб під систему, своп і користувачів; поставив улюблений <a href="http://www.tivasyk.info/2012/09/blog-post_29.html" target="_blank">crunchbang 11</a> (waldorf), до якого вже дуже звик…<br /><br /><h2>налаштування linux для aspire s3</h2>багато корисних підказок щодо налаштування linux для кращої роботи на aspire s3 <a href="http://www.linlap.com/acer_aspire_s3" target="_blank">знайшов на linlap.com</a>, у <a href="https://wiki.archlinux.org/index.php/Solid_State_Drives#Swap_Space_on_SSDs" target="_blank">вікі archlinux.org</a>; перелічу найбільш важливі.<br /><br /><b>чорний екран?</b> перша проблема: чорний екран під час запуску liveusb і вже встановленої системи; в обох випадках «лікується» додаванням одного параметра ядра на старті (<i>e</i> в grub перед завантаженням системи, додати до рядка, що починається з <i>linux</i> і закінчується чимось на кшалт <i>quiet</i>, закінчити <i>ctrl-x</i>):<br /><blockquote class="tr_bq"><code> acpi_backlight=vendor</code></blockquote>одразу після успішного старту встановленої системи — прописати те саме в <i>/etc/default/grub</i> і переконфігурувати загружчик:<br /><blockquote class="tr_bq"><code>sudo update-grub</code></blockquote><b>ssd, файлова система.</b> ще один параметр ядра, який <a href="https://wiki.archlinux.org/index.php/Solid_State_Drives#Kernel_parameter_.28for_a_single_device.29" target="_blank">варто додати</a> до конфігурації grub (якщо ssd — єдиний накопичувач):<br /><blockquote class="tr_bq"><code>elevator=noop</code></blockquote>додатковий параметр <i>noatime</i> (<a href="http://forum.ubuntu-fr.org/viewtopic.php?id=298959" target="_blank">або relatime</a>) у файлі <i><a href="https://wiki.archlinux.org/index.php/fstab" target="_blank">/etc/fstab</a></i> в кожному рядку, що відповідає розділу на ssd, зменшує кількість службових записів на диск, підвищуючи швидкість читання та ресурс (<i>nodiratime</i>, який інколи додають «для надійності», <a href="http://lwn.net/Articles/245002/" target="_blank">не потрібен</a> — його вже включено до <i>noatime</i>).<br /><br />там же — варто додати кілька рядків для монтування тек з тимчасовими файлами на віртуальному диску в озу, а не на ssd:<br /><blockquote class="tr_bq"><strike><code>none /var/log tmpfs defaults 0 2<br />none /var/tmp tmpfs defaults 0 2</code></strike><br /><code>none /tmp tmpfs defaults 0 2</code></blockquote><b>поновлення</b> (2013-10-27). post-factum ненав’язливо <a href="http://www.tivasyk.info/2013/10/aspire-s3-crunchbang.html?showComment=1382819877398#c361615454554276918">натякає</a>, що <i>/var/*</i> не варто ось так запросто монтувати в озу… але й писати журнали на ssd, щойно якійсь софтині так заманеться — це нижча швидкодія та менший ресурс. <a href="http://www.debian-administration.org/articles/661" target="_blank">рішення, можливо, є</a>… треба спробувати.<br /><br />на додачу вогнелиса треба <a href="https://wiki.archlinux.org/index.php/Firefox_Ramdisk" target="_blank">«відучити» викоритовувати диск для кешування</a>, натомість збільшивши розмір кешу в пам’яті.<br /><br /><b>тачпад.</b> до <a href="http://www.tivasyk.info/2013/02/blog-post.html" target="_blank">автовідключення тачпада під час друку на клавіатурі та приховування курсора</a> варто додати ще один рядок, щоб отримати вертикальний скрол по правому краю, скрол двома пальцями, клік по тапу, правий клік по тапу двома пальцями, ігнорування долоні, зручніше виділення та нормальний правий клік фізичної кнопки:<br /><blockquote class="tr_bq"><code>synclient VertEdgeScroll=1 VertTwoFingerScroll=1 TapButton1=1 TapButton2=3 PalmDetect=1 ClickPad=1 RightButtonAreaBottom=2000 RightButtonAreaTop=1521 RightButtonAreaLeft=2058 RightButtonAreaRight=2558</code></blockquote><br /><i>synclient</i> без параметрів показує поточні налаштування, <i>man synaptics</i> розшифровує допустимі параметри.<br /><br />з цими налаштуваннями тачпад виявився досить зручним і заміняє мишу (особливо враховуючи, що граюся останнім часом я лише в <a href="http://www.tivasyk.info/search/?q=dwarf+fortress" target="_blank">dwarf fortress</a> та <a href="http://www.tivasyk.info/search/?q=cataclysm" target="_blank">cataclysm</a>).<br /><br /><b>bluetooth</b> не використовую, намарне «їсть» батарею; відключити на старті системи, додавши один рядок до <i>/etc/rc.local</i>:<br /><blockquote><code>rfkill block bluetooth</code></blockquote><br /><b>енергозбереженння.</b> ще одна опція ядра до файлу <i>/etc/default/grub</i> відключає зневаждувальну опцію і зменшує кількість системних переривань:<br /><blockquote class="tr_bq"><code>nmi_watchdog=0</code></blockquote>інший додатковий параметр у /etc/fstab зменшує кількість записів на диск і знижує енергоспоживання:<br /><blockquote class="tr_bq"><code>commit=15</code></blockquote>наразі це все щодо налаштування заліза, решта працює непогано «з коробки».<br /><br />на додачу всі важливі конфігураційні файли (налаштування openbox, tint2, conky тощо) переніс на dropbox і залінкував туди відповідні теки в <i>/home/user/.config</i> — сподіваюся, тепер не доведеться їх заново відновлювати щоразу, достатньо буде встановити dropbox і відновити лінки.