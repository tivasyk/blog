---
layout: post
title: марсохід з конструктора makeblock на arduino
date: '2015-12-31T01:49:00.002+02:00'
author: tivasyk
tags:
- комп'ютери
- цікаве
- ігри
- linux
- підказки
- android
- позитив
- діти
modified_time: '2016-10-06T20:17:57.047+03:00'
thumbnail: https://2.bp.blogspot.com/-Nc-WZp58Pz0/VoHR55nOwbI/AAAAAAAAuS4/HaXsjBmC2eQ/s72-c/makeblock_robot_20151228_082202_lomo.jpg
blogger_id: tag:blogger.com,1999:blog-1498862426470895405.post-1774027117372394357
blogger_orig_url: http://www.tivasyk.info/2015/12/makeblock-arduino.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-Nc-WZp58Pz0/VoHR55nOwbI/AAAAAAAAuS4/HaXsjBmC2eQ/s1600/makeblock_robot_20151228_082202_lomo.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="133" src="https://2.bp.blogspot.com/-Nc-WZp58Pz0/VoHR55nOwbI/AAAAAAAAuS4/HaXsjBmC2eQ/s200/makeblock_robot_20151228_082202_lomo.jpg" width="200" /></a></div>цього року завчасу взявся вибирати <b>подарунок синові</b> до дванадцятого дня народження. шукав щось незвичне, щоби і його справді зацікавило, і користь від того якась йому ж була. майже одразу з'явилася думка придбати якийсь <b>програмований конструктор</b> — і збирати цікаво, і до програмування може інтерес викликати.<br /><br />навіть і не пригадаю, звідки в мене таке в голові сиділо, але я приблизно уявляв собі, що треба шукати. трохи погугливши та почитавши, спинився на <a href="http://www.makeblock.cc/" target="_blank">makeblock</a>, а серед їх продуктів — на комплекті <a href="http://www.makeblock.cc/starter-robot-kit/" target="_blank">starter robot kit</a>: в одній коробці все, що треба для збирання гусеничного «марсохода» на базі arduino, <b>з керуванням по bluetooth</b>, можливістю <a href="http://www.makeblock.cc/electronic-modules/" target="_blank">додавати модулі</a> та з доступом до вихідних кодів програми. ну чи ж не мрія?<br /><ul><li><b>вам посилка!</b> про вартість, замовлення, термін доставки;</li><li><b>перші враження.</b> про півгодини концентрованого хлопчачого щастя;</li><li><b>прикрий фейл</b>. про те, що зібраний марсохід не хоче їхати;</li><li><b>без паніки!</b> про те, навіщо читати далі;</li><li><b>головна біда.</b> про брак детальної покрокової підказки в інструкції makeblock;</li><li><b>діагностика проблеми.</b> про спроби зрозуміти, чому дистанційне керування не працює;</li><li><b>нова надія.</b> про дві невеликих, але важливих події;</li><li><b>на роздоріжжі.</b> про вибір програми для завантаження прошивки робота;</li><li><b>майже готово?</b> про важливі налаштування перед завантаженням прошивки;</li><li><b>компіляція і завантаження.</b> про підступний нюанс і done uploading;</li><li><b>поїхали!</b> про успішне випробування;</li><li><b>резюме і плани.</b> про те, як ще можна вдосконалити марсохід.</li></ul>допис довгий, містить багато ілюстрацій, одне відео, і <b>має щасливий фінал</b>.<br /><br /><h3><a name='more'></a>вам посилка!</h3><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-6IcNMXmIfOI/VoHUTDaVhGI/AAAAAAAAuTE/ka2Wme_K1vg/s1600/makeblock_robot_2015-11-12_02_lomo.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="133" src="https://3.bp.blogspot.com/-6IcNMXmIfOI/VoHUTDaVhGI/AAAAAAAAuTE/ka2Wme_K1vg/s200/makeblock_robot_2015-11-12_02_lomo.jpg" width="200" /></a></div>на початку листопада замовив. звісно, <b>ціна трохи кусається</b> ($150 за версію з bluetooth, не враховуючи пересилки), але… як там жартують у фейсбуках, купуючи дітям дорогі іграшки, батьки здійснюють власні мрії?<br /><br />шостого листопада замовлення <b>відравили поштою dhl</b>, а вже дванадцятого я тримав у руках акуратний пакунок. неймовірна швидкість! я звик чекати місяцями дрібні покупки на ebay, тож був приємно здивований.<br /><br />не втримався, і одразу зняв захисне пакування dhl, щоби поглянути на коробку makeblock: якісний фарбований картон, приємні кольори, акуратне оформлення. сподобалося.<br /><br />однак далі не розпаковував: до дня народження лишалося більше місяця, тож подарунок переховувався в конторі й трохи катався в багажнику. аж ось <b>нарешті день «д»</b>!<br /><br /><h3>перші враження</h3><a href="http://1.bp.blogspot.com/-3lFnNLZEyLk/VoHaV5vVKEI/AAAAAAAAuTU/DCI-wS_x6-k/s1600/makeblock_robot_2015-11-12_01_lomo.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="133" src="https://1.bp.blogspot.com/-3lFnNLZEyLk/VoHaV5vVKEI/AAAAAAAAuTU/DCI-wS_x6-k/s200/makeblock_robot_2015-11-12_01_lomo.jpg" width="200" /></a>конструктор тимко отримав ще вранці, <b>очі загорілися</b>. але день для всієї родини видався метушливий. приготуванння, гості, все на купу. кілька разів звучало «тату, нумо збирати робота». аж нарешті торт зі свічками, чай, прощання. прибравши начиння й завантаживши посудомийку, всілися з сином разом і <b>відкрили коробку</b>.<br /><br />опис пише, що <b>в наборі є все необхідне</b>, аби зібрати діючий марсохід, за винятком шести батарейок. <br /><br />механічна складова конструктора бездоганна! легкі, міцні алюмінієві деталі шасі, якісні гумові сегменти гусениць, міцненька і зрозуміло промаркована плата з контролером, акуратне пакування, інструменти в комплекті й зрозуміла покрокова <a href="https://raw.githubusercontent.com/Makeblock-official/Assembly-Instructions/master/Starter_Robot_Kit_Bluetooth_Instruction.pdf" target="_blank">інструкція для збирання</a> марсохода — що ще треба?<br /><br />коротше: в коробці makeblock нам прислали <b>півгодини концентрованого хлопчачого щастя</b>!<br /><br /><h3>прикрий фейл</h3><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-jFFwigFH9lE/VoJUkzgDwjI/AAAAAAAAuT8/jbwiUmdi3PY/s1600/makeblock_robot_20151228_082300_lomo.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="133" src="https://4.bp.blogspot.com/-jFFwigFH9lE/VoJUkzgDwjI/AAAAAAAAuT8/jbwiUmdi3PY/s200/makeblock_robot_20151228_082300_lomo.jpg" width="200" /></a></div>аж ось нарешті наш марсохід готовий. «очиці» його ультразвукового сенсора <b>випромінюють харизму</b>, і найперше <a href="https://uk.wikipedia.org/wiki/%D0%92%D0%9E%D0%9B%D0%9B%C2%B7%D0%86" target="_blank">нагадують про волл-і</a>: здаєтся, що робот живий, зараз здригнеться, крутонеться на місці й помчить пакувати сміття!<br /><br />понишпоривши шухлядами, знайшли шість батарейок АА і запакували в робота, зайвий раз перевірили підключення<b> </b>двох моторів, ультразвукового сенсора і модуля bluetooth та кабеля живлення — врешті-решт перемикаємо головний тумблер на платі контролера і спостерігаємо магію світла: маленькими світлодіодами робот сигналізує, що <b>готовий приймати команди</b>.<br /><br />щоправда, для цього потрібно завантажити спеціальний <a href="http://app.makeblock.cc/" target="_blank">додаток на смартфон</a> чи планшет (є версії <a href="https://play.google.com/store/apps/details?id=cc.makeblock.makeblock" target="_blank">для android</a> та apple), згадка про це є і в інструкції. отже, завантажуємо програму на свої смартфони — я і син, — і по черзі пробуємо.<br /><br />пристрої паруються по bluetooth, додаток підключається до конструктора makeblock і…<br /><br />…дзуськи! <b>марсохід не їде</b>. чому?!<br /><br /><h3>без паніки!</h3>в цім місці хочу зробити невеличку оптимістичну інтерлюдію: <b>робот таки працюватиме!</b> ось шестисекундний <a href="https://www.youtube.com/watch?v=QPGfVRACJ3w" target="_blank">відеопруф</a>:<br /><br /><center><iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/QPGfVRACJ3w" width="420"></iframe></center><br />хоча, звісно, в ту мить я був дуже сприкрений, та й син трохи розчаровано дивився на щойно зібраного робота.<br /><br /><h3>головна біда</h3><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-5PZVMMXa0oM/VoKSj_EywVI/AAAAAAAAuUc/UshqdHQR6eg/s1600/makebot_manual_2015-12-29.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="133" src="https://1.bp.blogspot.com/-5PZVMMXa0oM/VoKSj_EywVI/AAAAAAAAuUc/UshqdHQR6eg/s200/makebot_manual_2015-12-29.jpg" width="200" /></a></div>на мою гадку <b>головна біда</b> конструктора makeblock в тім, що після складання шасі, встановлення плати контролера і підключеня всіх кабелів і посилання на додаток для керування по bluetooth, <a href="https://raw.githubusercontent.com/Makeblock-official/Assembly-Instructions/master/Starter_Robot_Kit_Bluetooth_Instruction.pdf" target="_blank">друкована інструкція</a> з комплекту полишає вас сам на сам з можливими проблемами: не даючи покрокових підказок з діагностики.<br /><br />звісно, я одразу ж попрямував на <a href="http://www.makeblock.cc/" target="_blank">вебсайт makeblock.cc</a> — але і там не все гаразд в плані доступності інформації: <a href="http://learn.makeblock.cc/" target="_blank">на перший погляд її багато</a>, але вона досить плутана й неповна. але найгірше: на моє нещастя, саме в той вечір частина посилань на інформаційні ресурси чомусь викидала мені помилку «bad gateway» — певно, були проблеми з сервером, на якому хостяться форум, вікі й частина підказок. і хоч ти лусни.<br /><br />а в основі ж цього конструктора — справжній мікроконтролер <a href="https://www.arduino.cc/en/Main/ArduinoBoardUno" target="_blank">arduino uno</a> (<a href="https://uk.wikipedia.org/wiki/Arduino" target="_blank">строго кажучи</a>, мікроконтролер там atmega328p, а arduino uno — назва усієї плати з інтерфейсною обв’язкою та роз’ємами); наче й цяцька — але дванадцятирічного хлопця не полишиш, як з lego, мовляв, розбирайся. та й далеко <b>не кожен дорослий розбереться</b> з ходу, не маючи досвіду програмування для arduino.<br /><br />приміром, на кожному електронному модулі в наборі — на основній платі, ультразвуковому сенсорі й модулі bluetooth, — є оті дрібненькі червоні й сині світлодіоди, котрі явно слугують для індикації стану. але <b>в інструкції — ані слівця</b> про те, що означає, якщо синій світлодіод bluetooth блимає, і що — коли неперервно світиться.<br /><br /><h3>діагностика проблеми</h3><a href="http://2.bp.blogspot.com/-3-uGUdQwS6s/VoKmOxda91I/AAAAAAAAuUw/jGJ6224X5ow/s1600/makeblock_robot_20151228_082518_lomo.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="133" src="https://2.bp.blogspot.com/-3-uGUdQwS6s/VoKmOxda91I/AAAAAAAAuUw/jGJ6224X5ow/s200/makeblock_robot_20151228_082518_lomo.jpg" width="200" /></a>хоча, звісно, голова в нас на плечах не лише для того, щоби шапку носити, і <b>маючи навіть невеликий досвід</b> взаємодії з електронними гаджетами, певних корисних висновків можна дійти. червоний світлодіод на кожному з модулів — ймовірно, банальний індикатор живлення. вони всі горять.<br /><br />синій світлодіод модуля bluetooth <b>блимає одразу після включення</b> робота — ймовірно, це режим очікування підключення (ну логічно ж, ні? ви ж підключали колись бездротову гарнітуру?) відкривши додаток makeblock на смартфоні, включивши bluetooth і пошукавши сусідні пристрої, знаходжу makeblock. тобто принаймні модуль bluetooth працює.<br /><br />пристрої паруються нормально, і наче з'єднуються — програма на смартфоні каже, що з'єднання встановлено, а синій світлодіод на модулі bluetooth робота припиняє блимати і горить постійно.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-xO5KyoDOum0/VoKm2UFLOTI/AAAAAAAAuU4/VoQzCY-mhSg/s1600/makeblock_app_2015-12-29-12-35-17-629.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><br /></a></div>але ані на команди з пульта керування двигунами <b>робот не реагує</b>, ані притомної інформації від ультразвукового датчика не показує.<br /><br />на цьому я вирішив, що час спати. наступного дня трапилися дві події, котрі дали мені надію.<br /><br /><h3>нова надія</h3><a href="http://1.bp.blogspot.com/-EdM3OlAQIuY/VoKJO8pn-OI/AAAAAAAAuUM/7NgKbn0vgVw/s1600/makeblock_robot_20151228_082110_lomo.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="133" src="https://1.bp.blogspot.com/-EdM3OlAQIuY/VoKJO8pn-OI/AAAAAAAAuUM/7NgKbn0vgVw/s200/makeblock_robot_20151228_082110_lomo.jpg" width="200" /></a>по-перше, наступного дня <b>makeblock поремонтував свій сайт</b> — я отримав доступ до форуму і пішов шукати підказок. виявилося, що ми не самі з такою ж проблемою: на форумі та в системі коментування discus на самому сайті чимало покупців <a href="http://www.makeblock.cc/ultimate-robot-kit-blue/#comment-2426143055" target="_blank">звітують про дуже схожі симптоми</a> (ще <a href="http://forum.makeblock.cc/t/need-help-with-starter-robot-tank/1070" target="_blank">приклад</a>). переважно працівники підтримки makeblock досить розгублено реагують на ці звернення, але кілька разів я натрапляв на пораду <b>поновити прошивку робота</b>.<br /><br />по-друге, ввечері після роботи я ще раз взявся до проблеми, і почав з того, що перевірив усі з'єднання та ще раз спробував підключитися смартфоном до робота… зненацька ультразвуковий датчик видав <b>щось схоже на відстань до стіни</b>! я клацнув джойстик — марсохід закрутився на місці!<br /><br />більше робот не реагував на команди, але це вже було щось: скоріш за все, з механічною та електричною частиною все гараз, а <b>проблема або суто програмна</b>, або ж якась вада модуля bluetooth. в будь-якім випадку для початку варто спробувати поновити програму.<br /><br />але як?<br /><br /><h3>на роздоріжжі</h3><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-1JmuftxsCbA/VoPA3D54csI/AAAAAAAAuVk/DedfX7QqHXo/s1600/makeblock_meorion_20151228_222651_lomo.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="133" src="https://1.bp.blogspot.com/-1JmuftxsCbA/VoPA3D54csI/AAAAAAAAuVk/DedfX7QqHXo/s200/makeblock_meorion_20151228_222651_lomo.jpg" width="200" /></a></div>я ніколи не програмував мікроконтролерів, не мав справи з arduino. довелося розбиратися. на платі робота (<a href="http://www.makeblock.cc/me-orion-base-on-arduino-uno/" target="_blank">me orion board</a> на базі arduino uno) є <b>роз’єм micro usb</b> — отже, можна підключити до ноутбука. форуми <a href="http://forum.makeblock.cc/t/error-when-uploading-to-orion-board-with-bluetooth-module-connected/2267" target="_blank">наполегливо радять</a> при цьому <b>відключити модуль bluetooth</b> від основної плати.<br /><br />що далі? usb-інтерфейс — лише для програмування, чи дає ще якісь можливості? для когось, хто добре знайомий з платформою arduino, це смішні питання, але 12-річний хлопчина і 40-літній дядько без досвіду шукатимуть <b>чітких і зрозумілих відповідей</b> на сайті makeblock. див. вище розділ «головна біда»…<br /><br />makeblock пропонує три варіанти для програмування робота (в тім порядку, як я їх розглядав):<br /><ul><li><a href="http://learn.makeblock.cc/learning-scratch/" target="_blank">scratch</a> (або mblock, або scratchbot — і тут плутанина);</li><li><a href="http://learn.makeblock.cc/learning-ardublock/" target="_blank">ardublock</a> (додаток для візуального програмування);</li><li><a href="http://learn.makeblock.cc/learning-arduino/" target="_blank">arduino ide</a> (середовище програмування для платформи arduino).</li></ul><h5>scratch (mblock)</h5><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-g-n-pG91abE/VoQ6BXTIsMI/AAAAAAAAuWc/HqLzB5WTuiU/s1600/makeblock_scratch_2015-12-30_221241_1018x683_lomo.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="133" src="https://2.bp.blogspot.com/-g-n-pG91abE/VoQ6BXTIsMI/AAAAAAAAuWc/HqLzB5WTuiU/s200/makeblock_scratch_2015-12-30_221241_1018x683_lomo.jpg" width="200" /></a></div>найперше зацікавився цим варіантом, бо <a href="https://uk.wikipedia.org/wiki/%D0%A1%D0%BA%D1%80%D0%B5%D1%82%D1%87_%28%D0%BC%D0%BE%D0%B2%D0%B0_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D1%83%D0%B2%D0%B0%D0%BD%D0%BD%D1%8F%29" target="_blank">scratch</a> — це яскраве і просте у використанні середовище для візуального програмування, яке я колись встановлював і ми трохи пробували з сином програмувати інтерактивну анімацію.<br /><br />якби makeblock пропонували лише свій додаток до scratch, а саме середовище я міг би встановити з репозиторіїв arch linux (точніше, з aur) — я би, можливо, і спробував. але вони «вдосконалили» scratch, додавши свої бібліотеки та перейменувавши на mblock, і <a href="http://learn.makeblock.cc/learning-scratch/" target="_blank">запакували це для windows та mac os</a>. воно ще й вимагає adobe air для роботи?! в сад!<br /><br /><h5>ardublock</h5><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-nX1LidiO1xU/VoQmg7TNAKI/AAAAAAAAuWM/6u9MRf9h7SQ/s1600/makeblock_ardublock_2015-12-30_205138_1024x683_lomo.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="133" src="https://2.bp.blogspot.com/-nX1LidiO1xU/VoQmg7TNAKI/AAAAAAAAuWM/6u9MRf9h7SQ/s200/makeblock_ardublock_2015-12-30_205138_1024x683_lomo.jpg" width="200" /></a></div>винахідникам з arduino захотілося зробити щось подібне до scratch, але своє, і вони прикрутили до свого середовища розробки візуальний редактор, назвавши його <a href="http://learn.makeblock.cc/learning-ardublock/" target="_blank">ardublock</a>. <br /><br />виглядає симпатично (хоч і не так якісно, як scratch), має версію для linux. але — це лише додаток до середовище arduino ide. то чи не простіше одразу встановити…<br /><br /><h5>arduino ide</h5><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-uzdJTPzOcB0/VoRf9W1QItI/AAAAAAAAuXY/mmFDZIOZvmk/s1600/makeblock_arduino_2015-12-30_195255_1024x683.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="133" src="https://3.bp.blogspot.com/-uzdJTPzOcB0/VoRf9W1QItI/AAAAAAAAuXY/mmFDZIOZvmk/s200/makeblock_arduino_2015-12-30_195255_1024x683.jpg" width="200" /></a></div>логічний фінал роздумів: <a href="https://www.arduino.cc/en/Main/Software" target="_blank">arduino ide</a>, «рідне» середовище програмування для платформи arduino. це найближче до «заліза» і найближче до коду, це велика спільнота користувачів, є версія для linux і навіть «рідний» <a href="https://aur.archlinux.org/packages/arduino/" target="_blank">пакунок для arch linux</a> в репозиторії aur та окрема <a href="https://wiki.archlinux.org/index.php/Arduino" target="_blank">сторінка у arch wiki</a>! коротше кажучи, <b>найкращі шанси розібратися</b> і знайти підказку, коли що. <br /><br />для тестування я завантажив і розпакував 64-бітну версію для linux з офіційного сайту arduino.<br /><br /><h3>майже готово?</h3><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-C3ovw7pWwYQ/VoRBqT4tVwI/AAAAAAAAuWs/eOCE78JNfVk/s1600/makeblock_libs_2015-12-30--1451508267_lomo.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="133" src="https://3.bp.blogspot.com/-C3ovw7pWwYQ/VoRBqT4tVwI/AAAAAAAAuWs/eOCE78JNfVk/s200/makeblock_libs_2015-12-30--1451508267_lomo.jpg" width="200" /></a></div>з цього місця <b>вебсайт makeblock знову стає корисним</b>, зокрема <a href="http://learn.makeblock.cc/learning-arduino/" target="_blank">сторінка з інструкцією до використання arduino</a>. зокрема зрозуміло, що до arduino потрібно додати <a href="http://learn.makeblock.cc/learning-arduino/#Step2-Install-Makeblock-Library-for-Arduino" target="_blank">бібліотеки makeblock</a> для програмування основної плати та взаємодії з різними датчиками і моторами. тепер <a href="https://github.com/Makeblock-official/Makeblock-Libraries/archive/master.zip" target="_blank">завантажую архів з github</a> і руками переношу теку makeblock з архіва до теки libraries в інсталяції arduino <b>на комп'ютері з linux</b> (користувачам windows простіше — для них ці бібліотеки запаковано в інсталяцію arduino від makeblock). <br /><br />далі треба <b>підключити робота кабелем до usb</b> комп'ютера, не забувши попередньо <a href="http://forum.makeblock.cc/t/error-when-uploading-to-orion-board-with-bluetooth-module-connected/2267" target="_blank">відключити модуль bluetooth</a> (робот тихенько цвірінькне, якщо включено мікродинамік — див. малесенький білий перемикач біля 8 роз'єму), а на комп'ютері в терміналі перевірити, як називається відкритий для usb порт:<br /><br /><code>ls -l /dev/ttyUSB*</code><br /><br />вивід матиме приблизно такий вигляд (якщо до комп'ютера підключений лише робот, буде лише один рядок):<br /><br /><code>crw-rw---- 1 root <span style="color: #cc0000;">uucp</span> 188, 0 Dec 30 22:51 /dev/ttyUSB0</code><br /><br />червоним кольором позначено елемент (в моєму випадку uucp), котрий зараз знадобиться, щоби <b>дати arduino права на доступ usb</b> (тут tivasyk — ім'я користувача): <br /><br /><code>sudo usermod -a -G <span style="color: #cc0000;">uucp</span> tivasyk</code><br /><br /><a href="http://3.bp.blogspot.com/--oaSmPb8TmM/VoRV00Dx0fI/AAAAAAAAuXE/Ggk9PZKAp4c/s1600/makeblock_arduino_2015-12-30_234900_animation2.gif" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="133" src="https://3.bp.blogspot.com/--oaSmPb8TmM/VoRV00Dx0fI/AAAAAAAAuXE/Ggk9PZKAp4c/s200/makeblock_arduino_2015-12-30_234900_animation2.gif" width="200" /></a><b>запускаю arduino</b> і перевіряю, що пунrкт <i>tools &gt; port</i> в головному меню активний і показує потрібний порт (в моєму випадку ttyUSB0), а в меню <i>tools &gt;board</i> вибрано саме ту платформу arduino, на якій зібрано робота (arduino uno).<br /><br />тепер можна <b>завантажити вихідний код</b> програми для робота — шукаємо в головному меню пункт <i>file &gt; examples &gt; makeblockdrive &gt; example &gt; firmware_for_starter &gt; bluetooth_ultrasonic</i>, і текст програми з'явиться у (новому вікні) arduino ide. згодом в цьом коді можна спробувати розібратися, щось додати чи прибрати, але наразі нічого не чіпаю.<br /><br /><h3>компіляція і завантаження</h3><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-uzdJTPzOcB0/VoRf9W1QItI/AAAAAAAAuXU/WeCUZcXhVNE/s1600/makeblock_arduino_2015-12-30_195255_1024x683.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="133" src="https://3.bp.blogspot.com/-uzdJTPzOcB0/VoRf9W1QItI/AAAAAAAAuXU/WeCUZcXhVNE/s200/makeblock_arduino_2015-12-30_195255_1024x683.jpg" width="200" /></a></div>я одразу спробував <b>скомпілювати програму</b> (меню <i>sketch &gt; verity/compile</i>, або просто ctrl+r на клавіатурі) — і отримав повідомлення про <b>успішну операцію</b>. люблю цю мить, коли нарешті, після довгого куріння мануалів і танців з бубнами, щось таки вдається!<br /><br />наступний логічний крок — <b>завантажити скомпільований код на плату робота</b> (меню <i>sketch &gt; upload</i>, або ctrl+u на клавіатурі). зрозуміло, що кабель usb ще повинен бути підключений. але тут я отримав помилку:<br /><br /><code>error while loading shared libraries: libncurses.so.5: cannot open shared object file: No such file or directory</code><br /><br />arduino чомусь <b>хоче специфічну версію бібліотеки libncurses</b>. arch wiki одразу підказала рішення: можна його обдурити, підсунувши лінк на цю ж бібліотеку, але іншої версії (спершу підглянувши в теці /usr/lib/, яку саме бібліотеку libncurses встановлено, в мене знайшлася libncursesw.so.6.0):<br /><br /><code>sudo ln -s /usr/lib/libncursesw.so.6.0 /usr/lib/libncurses.so.5</code><br /><br />друга спроба… декілька довгих секунд arduino показує мені тривожне «uploading» з індикатором поступу операції… і раптом: <b>done uploading</b>!<br /><br /><h3>поїхали!</h3><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-_2NrNQkr1SY/VoRheFKs8HI/AAAAAAAAuXg/OYLUHFOsgtQ/s1600/makeblock_app_2015-12-29-12-35-17-629.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="112" src="https://3.bp.blogspot.com/-_2NrNQkr1SY/VoRheFKs8HI/AAAAAAAAuXg/OYLUHFOsgtQ/s200/makeblock_app_2015-12-29-12-35-17-629.jpg" width="200" /></a></div>час від'днати кабель usb від робота, під'єднати модуль bluetooth до основної плати (роз'єм 5), включити головний чорний перемикач ліворуч від роз'єма живлення.<br /><br />трохи хвилюючись, я включив bluetooth на смартфоні, знову запустив <b>додаток makeblock</b> і в переліку проектів вибрав «robot tank» (там є ілюстрація, помилитися неможливо). з'єднання з сусіднім пристроєм makeblock — жодних проблем.<br /><br />і тепер ультразвуковий датчик справно звітує про відстань до об'єкта попереду (120 см на скріншоті)! легкий дотик до віртуально джойстика — і <b>марсохід поїхав</b>.<br /><br /><h3>резюме і плани</h3><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-BgVmx-IuUEU/VoRsJsW9e8I/AAAAAAAAuXw/BfD8BmdfChI/s1600/makeblock_website_2015-12-31_014921_1097x738_lomo.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="134" src="https://2.bp.blogspot.com/-BgVmx-IuUEU/VoRsJsW9e8I/AAAAAAAAuXw/BfD8BmdfChI/s200/makeblock_website_2015-12-31_014921_1097x738_lomo.jpg" width="200" /></a></div>перепрошую за довжелезну епопею — але традиційно роблю це для себе, на випадок, якщо колись доведеться згадувати, як все це робиться. а можливо й стане в пригоді комусь, для кого коротке резюме «поновіть прошивку» на форумі звучить трішечки надто лаконічно.<br /><br />марсохід бомбезний, <b>гасає квартирою, мов навіжений</b>. в автоматичному режимі (кнопка з індикатором праворуч ультразвукового датчика на віртуальному пульті) намагається чемно обминати перешкоди. але…<br /><br />…вже хочеться більшого! наприклад:<br /><ul><li>зробити простенький корпус для модуля bluetooth, бо надто він тендітний, а робот любить перекидатися, переїжджаючи через капці;</li><li><b>модифікувати шасі</b>, щоби покращити прохідність і стійкість (як зробив <a href="http://forum.makeblock.cc/t/robot-tank-enhanced/1564" target="_blank">ось цей чувачидло</a>);</li><li>…або навіть взагалі переробити підвіску для кращого повторення рельєфу;</li><li>додати пару ліхтарів (і можливість їх вмикати-вимикати з віртуального пульта), щоби веселіше було катати в напівтемряві;</li><li>винести ультразвуковий датчик на платформу з сервомотором, і навчити робота «крутити головою», вибираючи вільний шлях (як зробив <a href="https://www.google.com.ua/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=2&amp;ved=0ahUKEwjfi8eO34TKAhUmi3IKHf72CHEQFggiMAE&amp;url=http%3A%2F%2Fforum.makeblock.cc%2Ft%2Fautonomous-robot-mark-2%2F887&amp;usg=AFQjCNGXsMrU42LM33ssCxELPk0KZPI7Zg&amp;sig2=QHBn5DgnoranDzUrb6jAQw&amp;bvm=bv.110151844,d.bGQ&amp;cad=rja" target="_blank">оцей хлопчина</a>); </li><li>додати <b>компас</b>, гіроскоп і навчити робота долати чи оминати перешкоди, тримаючи курс;</li><li>додати модуль wifi, простеньку <b>веб-камеру з wifi</b> і керувати роботом дистанційно?</li></ul>на сайті makeblock <a href="http://www.makeblock.cc/categories" target="_blank">купа додаткових деталей</a>, а сам конструктор — opensource, тож вигадати можна багато чого.<br /><br /><b>поновлення</b> (2016-10-06). пан злий викладач теж спробував робота в дії й написав трохи менш детальний огляд, але з купою цікавих фотографій конструктора на різних стадіях збирання, читайте: <a href="http://piktor.org.ua/robot_kit" target="_blank">іграшка, про яку ми колись мріяли: makeblock robot kit</a>.